---
title: "ESM 262 - Autopower loop"
author: "Lauren Puffer and Kaitlin Castor"
format: html
editor: visual
---

## Load libraries

```{r}
library(purrr) #used for pmap 
library(tidyverse)
library(ggplot2)

```

## Bring in the function

```{r}
autopower = function( m, V, A, crolling = 0.015, Cdrag = 0.3, g = 9.8, p_air = 1.2) {
  if (m < 0) return("Mass cannot be less than 0")
  result = (crolling * m * g* V) + (0.5 * A * p_air * Cdrag * V**3)
return(result) }
```

# Loop Method

## Make data frame and vector

```{r}
#four possible cars df
possible_cars = data.frame(name = c("A","B","C","D"),mass=c(10000,65000,38000,5000), area = c(22,30,22,10))

mean_speed= 80*0.277

#random number generator of speeds
speed = abs(rnorm(n=250, mean=mean_speed, sd=10))

```

## For Loop

```{r}
power = as.data.frame(matrix(nrow=length(speed), ncol=nrow(possible_cars)))
head(power)



for (i in 1:ncol(power)) {
  power[,i] = autopower(A=possible_cars$area[i], m=possible_cars$mass[i], V=speed)
}
head(power)

#tidy data
colnames(power)=possible_cars$name

power = power %>% pivot_longer(cols=everything(), names_to="car", values_to="power")
head(power)

# quick visualization
forloop_plot = ggplot(power, aes(car,power, fill=car))+geom_boxplot()+ggtitle("For Loop")
forloop_plot
```
